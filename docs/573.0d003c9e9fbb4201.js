"use strict";(self.webpackChunksky_admin=self.webpackChunksky_admin||[]).push([[573,73],{5073:(M,m,l)=>{l.r(m),l.d(m,{ClientSettingsComponent:()=>k});var d=l(177),f=l(541),a=l(4341),t=l(5351),e=l(7705),h=l(8490),g=l(6467),_=l(9631),u=l(5951);let k=(()=>{class p{constructor(s,r,n){this._DataService=s,this._MatDialogRef=r,this.data=n,this.clientForm=new a.gE({name:new a.MJ(this.data.name||null,[a.k0.required]),opinion:new a.MJ(this.data.opinion||null,[a.k0.required]),rate:new a.MJ(this.data.rate||null,[a.k0.required]),visible:new a.MJ(JSON.stringify(this.data.visible)||null,[a.k0.required])})}ngOnInit(){}update(){this.data.name=this.clientForm.get("name")?.value,this.data.opinion=this.clientForm.get("opinion")?.value,this.data.rate=this.clientForm.get("rate")?.value,this.data.visible=JSON.parse(this.clientForm.get("visible")?.value),this._DataService.updateClient(this.data,this.data._id).subscribe({next:s=>{console.log(s),this.cancel()},error:s=>{console.log(s)}})}cancel(){this._MatDialogRef.close(!0)}static{this.\u0275fac=function(r){return new(r||p)(e.rXU(h.u),e.rXU(t.CP),e.rXU(t.Vh))}}static{this.\u0275cmp=e.VBU({type:p,selectors:[["app-client-settings"]],standalone:!0,features:[e.aNF],decls:35,vars:2,consts:[[1,"container-fluid","bg-white","client","py-5"],[3,"formGroup"],[1,"row"],[1,"mb-4"],["appearance","outline",1,"w-100"],["formControlName","name","type","text","matInput","","placeholder","new name ...."],["formControlName","opinion","type","text","matInput","","placeholder","new opinion ...."],["formControlName","rate","max","5","min","1","type","number","matInput","","placeholder","new rate ...."],["formControlName","visible"],["value","true"],["value","false"],[1,"mb-4","d-flex","flex-wrap","gap-3","justify-content-center"],["type","submit",1,"update-btn",3,"disabled","click"],["type","button",1,"cancel-btn",3,"click"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),e.EFF(6,"Name"),e.k0s(),e.nrm(7,"input",5),e.j41(8,"mat-error"),e.EFF(9," Required Field* "),e.k0s()()(),e.j41(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),e.EFF(13,"Opinion"),e.k0s(),e.nrm(14,"input",6),e.j41(15,"mat-error"),e.EFF(16," Required Field* "),e.k0s()()(),e.j41(17,"div",3)(18,"mat-form-field",4)(19,"mat-label"),e.EFF(20,"Rate"),e.k0s(),e.nrm(21,"input",7),e.j41(22,"mat-error"),e.EFF(23," Required Field* "),e.k0s()()(),e.j41(24,"div",3)(25,"mat-radio-group",8)(26,"mat-radio-button",9),e.EFF(27,"visible"),e.k0s(),e.j41(28,"mat-radio-button",10),e.EFF(29,"Hidden"),e.k0s()()(),e.j41(30,"div",11)(31,"button",12),e.bIt("click",function(){return n.update()}),e.EFF(32,"Update"),e.k0s(),e.j41(33,"button",13),e.bIt("click",function(){return n.cancel()}),e.EFF(34,"Cancel"),e.k0s()()()()()),2&r&&(e.R7$(1),e.Y8G("formGroup",n.clientForm),e.R7$(30),e.Y8G("disabled",n.clientForm.invalid))},dependencies:[d.MD,f.G,a.qT,a.me,a.Q0,a.BC,a.cb,a.VZ,a.zX,a.j4,a.JD,g.rl,g.nJ,g.TL,_.fg,u.VT,u._g]})}}return p})()},9573:(M,m,l)=>{l.r(m),l.d(m,{ClientsComponent:()=>E});var d=l(177),f=l(541),a=l(5073),t=l(7705),e=l(8490),h=l(5351),g=l(5794);const _=function(s){return{"bg-row":s}};function u(s,r){if(1&s){const n=t.RV6();t.j41(0,"tr",6),t.bIt("click",function(){const c=t.eBV(n).index,C=t.XpG();return t.Njj(C.displayOpinion(c))}),t.j41(1,"td",7),t.EFF(2),t.k0s(),t.j41(3,"td",7),t.EFF(4),t.k0s(),t.j41(5,"td",7),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"td",7),t.EFF(9),t.k0s(),t.j41(10,"td",7)(11,"span"),t.EFF(12),t.k0s()(),t.j41(13,"td",8),t.bIt("click",function(i){t.eBV(n);const c=t.XpG();return t.Njj(c.stop(i))}),t.j41(14,"i",9),t.bIt("click",function(){const c=t.eBV(n).$implicit,C=t.XpG();return t.Njj(C.updateClient(c))}),t.k0s()(),t.j41(15,"td",8),t.bIt("click",function(i){t.eBV(n);const c=t.XpG();return t.Njj(c.stop(i))}),t.j41(16,"i",10),t.bIt("click",function(){const c=t.eBV(n).$implicit,C=t.XpG();return t.Njj(C.passId(c._id))}),t.k0s()()()}if(2&s){const n=r.$implicit,o=r.index,i=r.even;t.R7$(1),t.Y8G("ngClass",t.eq3(17,_,i)),t.R7$(1),t.JRh(o+1),t.R7$(1),t.Y8G("ngClass",t.eq3(19,_,i)),t.R7$(1),t.JRh(n.name),t.R7$(1),t.Y8G("ngClass",t.eq3(21,_,i)),t.R7$(1),t.JRh(t.i5U(7,14,n.createdAt,"longDate")),t.R7$(2),t.Y8G("ngClass",t.eq3(23,_,i)),t.R7$(1),t.SpI("",n.rate,".0"),t.R7$(1),t.Y8G("ngClass",t.eq3(25,_,i)),t.R7$(1),t.HbH(n.visible?"visible-state":"hidden-state"),t.R7$(1),t.JRh(n.visible?"Visible":"Hidden"),t.R7$(1),t.Y8G("ngClass",t.eq3(27,_,i)),t.R7$(2),t.Y8G("ngClass",t.eq3(29,_,i))}}function k(s,r){if(1&s){const n=t.RV6();t.j41(0,"div",11),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.opinionClicked=!1)}),t.j41(1,"div",12),t.bIt("click",function(i){t.eBV(n);const c=t.XpG();return t.Njj(c.stop(i))}),t.j41(2,"div",13)(3,"div")(4,"h2",14),t.EFF(5),t.nrm(6,"i",15),t.k0s()(),t.j41(7,"div",16)(8,"h4",17),t.EFF(9,"Message "),t.nrm(10,"i",18),t.k0s(),t.j41(11,"span"),t.nrm(12,"i",19),t.EFF(13),t.nI1(14,"date"),t.k0s()(),t.j41(15,"div",20)(16,"p",21),t.EFF(17),t.k0s()()()()()}if(2&s){const n=t.XpG();t.R7$(5),t.JRh(n.specific.name),t.R7$(8),t.SpI(" ",t.i5U(14,3,n.specific.dateOfCreation,"EEEE, MMMM d, y, h:mm:ss a zzzz"),""),t.R7$(4),t.JRh(n.specific.opinion)}}function p(s,r){if(1&s){const n=t.RV6();t.j41(0,"div",22),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.isDelClicked=!i.isDelClicked)}),t.j41(1,"div",23),t.bIt("click",function(i){t.eBV(n);const c=t.XpG();return t.Njj(c.stop(i))}),t.j41(2,"h2"),t.EFF(3,"Are you sure you want to delete this item?"),t.k0s(),t.j41(4,"p",24)(5,"strong"),t.EFF(6,"Note : "),t.k0s(),t.EFF(7,"This action cannot be undone."),t.k0s(),t.j41(8,"div",25)(9,"button",26),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.isDelClicked=!i.isDelClicked)}),t.EFF(10,"Discard"),t.k0s(),t.j41(11,"button",27),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.deleteClient())}),t.EFF(12,"Delete"),t.k0s()()()()}}let E=(()=>{class s{constructor(n,o,i){this._DataService=n,this._MatDialog=o,this._ToastrService=i,this.clients=[],this.specific={},this.clientId="",this.opinionClicked=!1,this.isDelClicked=!1}ngOnInit(){this.getAllClients()}displayOpinion(n){this.opinionClicked=!this.opinionClicked,this.specific=this.clients[n]}getAllClients(){this._DataService.getAllClients().subscribe({next:n=>{console.log(n),this.clients=n},error:n=>{console.log(n)}})}toggleIsDelClicked(){this.isDelClicked=!this.isDelClicked}deleteClient(){this._DataService.deleteClient(this.clientId).subscribe({next:n=>{console.log(n),this._ToastrService.success(n.message,"SUCCESS"),this.toggleIsDelClicked(),this.getAllClients()},error:n=>{console.log(n),this._ToastrService.error("Something went Wrong","ERROR"),this.toggleIsDelClicked()}})}passId(n){this.clientId=n,this.toggleIsDelClicked()}updateClient(n){const o=this._MatDialog.open(a.ClientSettingsComponent,{maxWidth:"70vw",minHeight:"200px",hasBackdrop:!0,disableClose:!1,data:n,backdropClass:"custom-backdrop-class",panelClass:"custom-dialog-class",autoFocus:!0,restoreFocus:!0,closeOnNavigation:!0});o.afterClosed().subscribe(i=>{1==i&&(this.getAllClients(),o.close()),console.log("Dialog is closed")})}stop(n){n.stopPropagation()}static{this.\u0275fac=function(o){return new(o||s)(t.rXU(e.u),t.rXU(h.bZ),t.rXU(g.tw))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-clients"]],standalone:!0,features:[t.aNF],decls:20,vars:3,consts:[[1,"container-fluid","mt-4"],[1,"my-table"],["colspan","2"],[3,"click",4,"ngFor","ngForOf"],["class","position-fixed bgda top-0 bottom-0 start-0 end-0 d-flex justify-content-center opinion-layer align-items-center",3,"click",4,"ngIf"],["class","position-fixed top-0 bottom-0 end-0 start-0 d-flex flex-column  justify-content-center align-items-center confirm",3,"click",4,"ngIf"],[3,"click"],[3,"ngClass"],[3,"ngClass","click"],[1,"fa","fa-edit","fa-xl","me-3",3,"click"],[1,"fa","fa-trash-can","fa-xl","me-3",3,"click"],[1,"position-fixed","bgda","top-0","bottom-0","start-0","end-0","d-flex","justify-content-center","opinion-layer","align-items-center",3,"click"],[1,"opinion",3,"click"],[1,"main-message"],[1,"sender","text-capitalize"],[1,"fa","fa-user-alt"],[1,"d-flex","flex-wrap","gap-4","justify-content-between","align-items-center","content-title"],[1,"d-flex","align-items-center","m-0","gap-2","text-black"],[1,"fa","fa-message","pt-1"],[1,"fa-regular","fa-calendar-days"],[1,"content","mt-2"],[1,"text-black"],[1,"position-fixed","top-0","bottom-0","end-0","start-0","d-flex","flex-column","justify-content-center","align-items-center","confirm",3,"click"],[1,"confirm-form","gap-3","w-50","text-center","p-4","d-flex","flex-column",3,"click"],[1,"text-muted"],[1,"d-flex","justify-content-center","align-items-center","gap-4","flex-wrap"],["type","button",1,"discard",3,"click"],["type","button",1,"delete",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),t.EFF(5,"Num"),t.k0s(),t.j41(6,"th"),t.EFF(7,"Client Name"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Date"),t.k0s(),t.j41(10,"th"),t.EFF(11,"rate"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Visible"),t.k0s(),t.j41(14,"th",2),t.EFF(15,"Action"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,u,17,31,"tr",3),t.k0s()()(),t.DNE(18,k,18,6,"div",4),t.DNE(19,p,13,0,"div",5)),2&o&&(t.R7$(17),t.Y8G("ngForOf",i.clients),t.R7$(1),t.Y8G("ngIf",i.opinionClicked),t.R7$(1),t.Y8G("ngIf",i.isDelClicked))},dependencies:[d.MD,d.YU,d.Sq,d.bT,d.vh,f.G],styles:[".opinion-layer[_ngcontent-%COMP%]{background-color:#00000080;color:#000}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]{width:40%;border-radius:40px}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .sender[_ngcontent-%COMP%]{font-size:25px;color:#000000e6;font-weight:700;display:flex;align-items:center;gap:10px;text-decoration:underline}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]{box-shadow:0 0 40px -3px #000c;background-color:#fff;padding:20px;border-radius:30px}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]{border-bottom:solid 2px rgba(0,0,0,.6);padding-bottom:5px}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000000b3;font-weight:700}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:150px;overflow:auto}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:1.5}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none!important}@media screen and (max-width: 768px){.opinion[_ngcontent-%COMP%]{width:95%!important}}"]})}}return s})()}}]);