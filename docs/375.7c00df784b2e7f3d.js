"use strict";(self.webpackChunksky_admin=self.webpackChunksky_admin||[]).push([[375,73],{5073:(x,u,a)=>{a.r(u),a.d(u,{ClientSettingsComponent:()=>j});var m=a(177),k=a(541),c=a(4341),t=a(5351),l=a(7705),b=a(8490),v=a(6467),g=a(9631),F=a(5951);let j=(()=>{class C{constructor(_,d,p){this._DataService=_,this._MatDialogRef=d,this.data=p,this.clientForm=new c.gE({name:new c.MJ(this.data.name||null,[c.k0.required]),opinion:new c.MJ(this.data.opinion||null,[c.k0.required]),rate:new c.MJ(this.data.rate||null,[c.k0.required]),visible:new c.MJ(JSON.stringify(this.data.visible)||null,[c.k0.required])})}ngOnInit(){}update(){this.data.name=this.clientForm.get("name")?.value,this.data.opinion=this.clientForm.get("opinion")?.value,this.data.rate=this.clientForm.get("rate")?.value,this.data.visible=JSON.parse(this.clientForm.get("visible")?.value),this._DataService.updateClient(this.data,this.data._id).subscribe({next:_=>{console.log(_),this.cancel()},error:_=>{console.log(_)}})}cancel(){this._MatDialogRef.close(!0)}static{this.\u0275fac=function(d){return new(d||C)(l.rXU(b.u),l.rXU(t.CP),l.rXU(t.Vh))}}static{this.\u0275cmp=l.VBU({type:C,selectors:[["app-client-settings"]],standalone:!0,features:[l.aNF],decls:35,vars:2,consts:[[1,"container-fluid","bg-white","client","py-5"],[3,"formGroup"],[1,"row"],[1,"mb-4"],["appearance","outline",1,"w-100"],["formControlName","name","type","text","matInput","","placeholder","new name ...."],["formControlName","opinion","type","text","matInput","","placeholder","new opinion ...."],["formControlName","rate","max","5","min","1","type","number","matInput","","placeholder","new rate ...."],["formControlName","visible"],["value","true"],["value","false"],[1,"mb-4","d-flex","flex-wrap","gap-3","justify-content-center"],["type","submit",1,"update-btn",3,"disabled","click"],["type","button",1,"cancel-btn",3,"click"]],template:function(d,p){1&d&&(l.j41(0,"div",0)(1,"form",1)(2,"div",2)(3,"div",3)(4,"mat-form-field",4)(5,"mat-label"),l.EFF(6,"Name"),l.k0s(),l.nrm(7,"input",5),l.j41(8,"mat-error"),l.EFF(9," Required Field* "),l.k0s()()(),l.j41(10,"div",3)(11,"mat-form-field",4)(12,"mat-label"),l.EFF(13,"Opinion"),l.k0s(),l.nrm(14,"input",6),l.j41(15,"mat-error"),l.EFF(16," Required Field* "),l.k0s()()(),l.j41(17,"div",3)(18,"mat-form-field",4)(19,"mat-label"),l.EFF(20,"Rate"),l.k0s(),l.nrm(21,"input",7),l.j41(22,"mat-error"),l.EFF(23," Required Field* "),l.k0s()()(),l.j41(24,"div",3)(25,"mat-radio-group",8)(26,"mat-radio-button",9),l.EFF(27,"visible"),l.k0s(),l.j41(28,"mat-radio-button",10),l.EFF(29,"Hidden"),l.k0s()()(),l.j41(30,"div",11)(31,"button",12),l.bIt("click",function(){return p.update()}),l.EFF(32,"Update"),l.k0s(),l.j41(33,"button",13),l.bIt("click",function(){return p.cancel()}),l.EFF(34,"Cancel"),l.k0s()()()()()),2&d&&(l.R7$(1),l.Y8G("formGroup",p.clientForm),l.R7$(30),l.Y8G("disabled",p.clientForm.invalid))},dependencies:[m.MD,k.G,c.qT,c.me,c.Q0,c.BC,c.cb,c.VZ,c.zX,c.j4,c.JD,v.rl,v.nJ,v.TL,g.fg,F.VT,F._g]})}}return C})()},8375:(x,u,a)=>{a.r(u),a.d(u,{ClientsComponent:()=>S});var m=a(177),k=a(541),c=a(5073),t=a(7705),l=a(8490),b=a(5351),v=a(5794),g=a(4341);let F=(()=>{class i{transform(e,o){return e.filter(n=>"true"==o?1==n.visible:"false"==o?0==n.visible:n)}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275pipe=t.EJ8({name:"visibiltySearch",type:i,pure:!0})}}return i})(),j=(()=>{class i{transform(e,o){return e.filter(n=>o<=0?n:n.rate==o)}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275pipe=t.EJ8({name:"rateSearch",type:i,pure:!0})}}return i})();function C(i,r){1&i&&t.nrm(0,"i",16)}function M(i,r){1&i&&t.nrm(0,"i",17)}function _(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Filter By"),t.k0s())}function d(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"reset Filter"),t.k0s())}function p(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Visibility"),t.k0s())}function E(i,r){if(1&i){const e=t.RV6();t.j41(0,"select",18),t.bIt("ngModelChange",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.visibility=n)})("click",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.stop(n))}),t.j41(1,"option",19),t.EFF(2,"Select"),t.k0s(),t.j41(3,"option",20),t.EFF(4,"Visible"),t.k0s(),t.j41(5,"option",21),t.EFF(6,"Hidden"),t.k0s()()}if(2&i){const e=t.XpG(2);t.Y8G("ngModel",e.visibility)}}function O(i,r){1&i&&(t.j41(0,"span"),t.EFF(1,"Rate"),t.k0s())}function y(i,r){if(1&i&&(t.j41(0,"option",24),t.EFF(1),t.k0s()),2&i){const e=r.$implicit;t.Y8G("value",e),t.R7$(1),t.JRh(e)}}const I=function(){return[1,2,3,4,5]};function P(i,r){if(1&i){const e=t.RV6();t.j41(0,"select",22),t.bIt("click",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.stop(n))})("ngModelChange",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.rate=n)}),t.j41(1,"option",19),t.EFF(2,"Select"),t.k0s(),t.DNE(3,y,2,2,"option",23),t.k0s()}if(2&i){const e=t.XpG(2);t.Y8G("ngModel",e.rate),t.R7$(3),t.Y8G("ngForOf",t.lJ4(2,I))}}const f=function(i){return{"bg-row":i}};function R(i,r){if(1&i){const e=t.RV6();t.j41(0,"tr",7),t.bIt("click",function(){const s=t.eBV(e).index,h=t.XpG(2);return t.Njj(h.displayOpinion(s))}),t.j41(1,"td",25),t.EFF(2),t.k0s(),t.j41(3,"td",25),t.EFF(4),t.k0s(),t.j41(5,"td",25),t.EFF(6),t.nI1(7,"date"),t.k0s(),t.j41(8,"td",25),t.EFF(9),t.k0s(),t.j41(10,"td",25)(11,"span"),t.EFF(12),t.k0s()(),t.j41(13,"td",26),t.bIt("click",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.stop(n))}),t.j41(14,"i",27),t.bIt("click",function(){const s=t.eBV(e).$implicit,h=t.XpG(2);return t.Njj(h.updateClient(s))}),t.k0s()(),t.j41(15,"td",26),t.bIt("click",function(n){t.eBV(e);const s=t.XpG(2);return t.Njj(s.stop(n))}),t.j41(16,"i",28),t.bIt("click",function(){const s=t.eBV(e).$implicit,h=t.XpG(2);return t.Njj(h.passId(s._id))}),t.k0s()()()}if(2&i){const e=r.$implicit,o=r.index,n=r.even;t.R7$(1),t.Y8G("ngClass",t.eq3(17,f,n)),t.R7$(1),t.JRh(o+1),t.R7$(1),t.Y8G("ngClass",t.eq3(19,f,n)),t.R7$(1),t.JRh(e.name),t.R7$(1),t.Y8G("ngClass",t.eq3(21,f,n)),t.R7$(1),t.JRh(t.i5U(7,14,e.createdAt,"longDate")),t.R7$(2),t.Y8G("ngClass",t.eq3(23,f,n)),t.R7$(1),t.SpI("",e.rate,".0"),t.R7$(1),t.Y8G("ngClass",t.eq3(25,f,n)),t.R7$(1),t.HbH(e.visible?"visible-state":"hidden-state"),t.R7$(1),t.JRh(e.visible?"Visible":"Hidden"),t.R7$(1),t.Y8G("ngClass",t.eq3(27,f,n)),t.R7$(2),t.Y8G("ngClass",t.eq3(29,f,n))}}function D(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",4)(1,"div",5)(2,"ul",6)(3,"li",7),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clearSearch())}),t.DNE(4,C,1,0,"i",8),t.DNE(5,M,1,0,"i",9),t.DNE(6,_,2,0,"span",10),t.DNE(7,d,2,0,"span",10),t.k0s(),t.j41(8,"li",7),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.toggleFilter("visibilityFlag"))}),t.DNE(9,p,2,0,"span",10),t.DNE(10,E,7,1,"select",11),t.k0s(),t.j41(11,"li",7),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.toggleFilter("rateFlag"))}),t.DNE(12,O,2,0,"span",10),t.DNE(13,P,4,3,"select",12),t.k0s()()(),t.j41(14,"table",13)(15,"thead")(16,"tr")(17,"th"),t.EFF(18,"Num"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Client Name"),t.k0s(),t.j41(21,"th"),t.EFF(22,"Date"),t.k0s(),t.j41(23,"th"),t.EFF(24,"rate"),t.k0s(),t.j41(25,"th"),t.EFF(26,"Visible"),t.k0s(),t.j41(27,"th",14),t.EFF(28,"Action"),t.k0s()()(),t.j41(29,"tbody"),t.DNE(30,R,17,31,"tr",15),t.nI1(31,"rateSearch"),t.nI1(32,"visibiltySearch"),t.k0s()()()}if(2&i){const e=t.XpG();t.R7$(4),t.Y8G("ngIf",!e.visibilityFlag&&!e.rateFlag),t.R7$(1),t.Y8G("ngIf",e.visibilityFlag||e.rateFlag),t.R7$(1),t.Y8G("ngIf",!e.visibilityFlag&&!e.rateFlag),t.R7$(1),t.Y8G("ngIf",e.visibilityFlag||e.rateFlag),t.R7$(2),t.Y8G("ngIf",!e.visibilityFlag),t.R7$(1),t.Y8G("ngIf",e.visibilityFlag),t.R7$(2),t.Y8G("ngIf",!e.rateFlag),t.R7$(1),t.Y8G("ngIf",e.rateFlag),t.R7$(17),t.Y8G("ngForOf",t.i5U(31,9,t.i5U(32,12,e.clients,e.visibility),e.rate))}}function T(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",29),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.opinionClicked=!1)}),t.j41(1,"div",30),t.bIt("click",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.stop(n))}),t.j41(2,"div",31)(3,"div")(4,"h2",32),t.EFF(5),t.nrm(6,"i",33),t.k0s()(),t.j41(7,"div",34)(8,"h4",35),t.EFF(9,"Message "),t.nrm(10,"i",36),t.k0s(),t.j41(11,"span"),t.nrm(12,"i",37),t.EFF(13),t.nI1(14,"date"),t.k0s()(),t.j41(15,"div",38)(16,"p",39),t.EFF(17),t.k0s()()()()()}if(2&i){const e=t.XpG();t.R7$(5),t.JRh(e.specific.name),t.R7$(8),t.SpI(" ",t.i5U(14,3,e.specific.dateOfCreation,"EEEE, MMMM d, y, h:mm:ss a zzzz"),""),t.R7$(4),t.JRh(e.specific.opinion)}}function G(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.isDelClicked=!n.isDelClicked)}),t.j41(1,"div",41),t.bIt("click",function(n){t.eBV(e);const s=t.XpG();return t.Njj(s.stop(n))}),t.j41(2,"h2"),t.EFF(3,"Are you sure you want to delete this item?"),t.k0s(),t.j41(4,"p",42)(5,"strong"),t.EFF(6,"Note : "),t.k0s(),t.EFF(7,"This action cannot be undone."),t.k0s(),t.j41(8,"div",43)(9,"button",44),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.isDelClicked=!n.isDelClicked)}),t.EFF(10,"Discard"),t.k0s(),t.j41(11,"button",45),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.deleteClient())}),t.EFF(12,"Delete"),t.k0s()()()()}}function N(i,r){1&i&&(t.j41(0,"div",46)(1,"h1",47),t.EFF(2,"Empty \u{1f614}"),t.k0s(),t.j41(3,"p"),t.EFF(4,"There is no Clients yet, please be patient"),t.k0s(),t.j41(5,"div",48),t.nrm(6,"div")(7,"div")(8,"div")(9,"div")(10,"div")(11,"div"),t.k0s()())}let S=(()=>{class i{constructor(e,o,n){this._DataService=e,this._MatDialog=o,this._ToastrService=n,this.clients=[],this.specific={},this.clientId="",this.opinionClicked=!1,this.isDelClicked=!1,this.visibility="",this.visibilityFlag=!1,this.rate=0,this.rateFlag=!1}ngOnInit(){this.getAllClients()}displayOpinion(e){this.opinionClicked=!this.opinionClicked,this.specific=this.clients[e]}getAllClients(){this._DataService.getAllClients().subscribe({next:e=>{this.clients=e},error:e=>{console.log(e)}})}toggleIsDelClicked(){this.isDelClicked=!this.isDelClicked}deleteClient(){this._DataService.deleteClient(this.clientId).subscribe({next:e=>{this._ToastrService.success(e.message,"SUCCESS"),this.toggleIsDelClicked(),this.getAllClients()},error:e=>{console.log(e),this._ToastrService.error("Something went Wrong","ERROR"),this.toggleIsDelClicked()}})}passId(e){this.clientId=e,this.toggleIsDelClicked()}updateClient(e){const o=this._MatDialog.open(c.ClientSettingsComponent,{maxWidth:"70vw",minHeight:"200px",hasBackdrop:!0,disableClose:!1,data:e,backdropClass:"custom-backdrop-class",panelClass:"custom-dialog-class",autoFocus:!0,restoreFocus:!0,closeOnNavigation:!0});o.afterClosed().subscribe(n=>{1==n&&(this.getAllClients(),o.close()),console.log("Dialog is closed")})}clearSearch(){this.visibility="",this.rate=0,this.resetFilter()}resetFilter(){this.visibilityFlag=!1,this.rateFlag=!1}toggleFilter(e){this.resetFilter(),this[e]=!this[e]}stop(e){e.stopPropagation()}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(l.u),t.rXU(b.bZ),t.rXU(v.tw))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-clients"]],standalone:!0,features:[t.aNF],decls:5,vars:4,consts:[["class","container-fluid mt-4",4,"ngIf","ngIfElse"],["class","position-fixed bgda top-0 bottom-0 start-0 end-0 d-flex justify-content-center opinion-layer align-items-center",3,"click",4,"ngIf"],["class","position-fixed top-0 bottom-0 end-0 start-0 d-flex flex-column  justify-content-center align-items-center confirm",3,"click",4,"ngIf"],["msg",""],[1,"container-fluid","mt-4"],[1,"filter","w-50"],[1,"list-unstyled","text-white"],[3,"click"],["class","fa-solid fa-filter",4,"ngIf"],["class","fa-solid fa-filter-circle-xmark",4,"ngIf"],[4,"ngIf"],["title","filter",3,"ngModel","ngModelChange","click",4,"ngIf"],["title","filter",3,"ngModel","click","ngModelChange",4,"ngIf"],[1,"my-table"],["colspan","2"],[3,"click",4,"ngFor","ngForOf"],[1,"fa-solid","fa-filter"],[1,"fa-solid","fa-filter-circle-xmark"],["title","filter",3,"ngModel","ngModelChange","click"],["value","","selected","","disabled",""],["value","true"],["value","false"],["title","filter",3,"ngModel","click","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[3,"ngClass"],[3,"ngClass","click"],[1,"fa","fa-edit","fa-xl","me-3",3,"click"],[1,"fa","fa-trash-can","fa-xl","me-3",3,"click"],[1,"position-fixed","bgda","top-0","bottom-0","start-0","end-0","d-flex","justify-content-center","opinion-layer","align-items-center",3,"click"],[1,"opinion",3,"click"],[1,"main-message"],[1,"sender","text-capitalize"],[1,"fa","fa-user-alt"],[1,"d-flex","flex-wrap","gap-4","justify-content-between","align-items-center","content-title"],[1,"d-flex","align-items-center","m-0","gap-2","text-black"],[1,"fa","fa-message","pt-1"],[1,"fa-regular","fa-calendar-days"],[1,"content","mt-2"],[1,"text-black"],[1,"position-fixed","top-0","bottom-0","end-0","start-0","d-flex","flex-column","justify-content-center","align-items-center","confirm",3,"click"],[1,"confirm-form","gap-3","w-50","text-center","p-4","d-flex","flex-column",3,"click"],[1,"text-muted"],[1,"d-flex","justify-content-center","align-items-center","gap-4","flex-wrap"],["type","button",1,"discard",3,"click"],["type","button",1,"delete",3,"click"],[1,"msg","flex-column"],[1,"text-white"],[1,"dots"]],template:function(o,n){if(1&o&&(t.DNE(0,D,33,15,"div",0),t.DNE(1,T,18,6,"div",1),t.DNE(2,G,13,0,"div",2),t.DNE(3,N,12,0,"ng-template",null,3,t.C5r)),2&o){const s=t.sdS(4);t.Y8G("ngIf",n.clients[0])("ngIfElse",s),t.R7$(1),t.Y8G("ngIf",n.opinionClicked),t.R7$(1),t.Y8G("ngIf",n.isDelClicked)}},dependencies:[m.MD,m.YU,m.Sq,m.bT,m.vh,k.G,g.xH,g.y7,g.wz,g.BC,g.vS,F,j],styles:[".opinion-layer[_ngcontent-%COMP%]{background-color:#00000080;color:#000}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]{width:40%;border-radius:40px}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .sender[_ngcontent-%COMP%]{font-size:25px;color:#000000e6;font-weight:700;display:flex;align-items:center;gap:10px;text-decoration:underline}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]{box-shadow:0 0 40px -3px #000c;background-color:#fff;padding:20px;border-radius:30px}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]{border-bottom:solid 2px rgba(0,0,0,.6);padding-bottom:5px}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#000000b3;font-weight:700}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{height:150px;overflow:auto}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:20px;font-weight:500;line-height:1.5}.opinion-layer[_ngcontent-%COMP%]   .opinion[_ngcontent-%COMP%]   .main-message[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]::-webkit-scrollbar{display:none!important}@media screen and (max-width: 768px){.opinion[_ngcontent-%COMP%]{width:95%!important}.filter[_ngcontent-%COMP%]{width:100%!important}}"]})}}return i})()}}]);