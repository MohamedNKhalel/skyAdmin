"use strict";(self.webpackChunksky_admin=self.webpackChunksky_admin||[]).push([[86],{6086:(ve,v,l)=>{l.r(v),l.d(v,{ProjectsComponent:()=>Fe});var p=l(177),m=l(5351),P=l(541),a=l(4341),e=l(7705),x=l(8490),k=l(5794),g=l(6467),u=l(8696),w=l(9631),M=l(2798),D=l(6600),b=l(5951),f=l(6057);function E(n,i){if(1&n){const t=e.RV6();e.j41(0,"ngx-dropzone-preview",32),e.bIt("removed",function(){const s=e.eBV(t).index,c=e.XpG();return e.Njj(c.onRemove(c.projectCover[s]))}),e.j41(1,"ngx-dropzone-label")(2,"div",33),e.nrm(3,"img",34),e.k0s()()()}if(2&n){const t=i.$implicit;e.Y8G("removable",!0),e.R7$(3),e.Y8G("src",t,e.B4B)}}function I(n,i){1&n&&(e.j41(0,"mat-error",35),e.nrm(1,"i",36),e.EFF(2," Only one photo is allowed. "),e.j41(3,"mat-hint",37),e.EFF(4,"*remove it first"),e.k0s()())}function O(n,i){1&n&&(e.j41(0,"p",39),e.EFF(1,"this field is "),e.j41(2,"strong"),e.EFF(3,"required"),e.k0s()())}function N(n,i){if(1&n&&(e.j41(0,"div"),e.DNE(1,O,4,0,"p",38),e.k0s()),2&n){const t=e.XpG();let r;e.R7$(1),e.Y8G("ngIf",null==(r=t.projectForm.get("projectCover"))||null==r.errors?null:r.errors.required)}}function R(n,i){if(1&n){const t=e.RV6();e.j41(0,"ngx-dropzone-preview",32),e.bIt("removed",function(){const s=e.eBV(t).index,c=e.XpG();return e.Njj(c.onRemoveMultiImages(c.images[s],s))}),e.j41(1,"ngx-dropzone-label")(2,"div",33),e.nrm(3,"img",34),e.k0s()()()}if(2&n){const t=i.$implicit;e.Y8G("removable",!0),e.R7$(3),e.Y8G("src",t,e.B4B)}}function G(n,i){1&n&&(e.j41(0,"p",39),e.EFF(1,"this field is "),e.j41(2,"strong"),e.EFF(3,"required"),e.k0s()())}function T(n,i){if(1&n&&(e.j41(0,"div"),e.DNE(1,G,4,0,"p",38),e.k0s()),2&n){const t=e.XpG();let r;e.R7$(1),e.Y8G("ngIf",null==(r=t.projectForm.get("images"))||null==r.errors?null:r.errors.required)}}function y(n,i){1&n&&(e.j41(0,"mat-error"),e.EFF(1," this field is "),e.j41(2,"strong"),e.EFF(3,"required"),e.k0s()())}function S(n,i){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Name must be at least "),e.j41(2,"strong"),e.EFF(3,"6 characters"),e.k0s()())}function $(n,i){if(1&n&&(e.j41(0,"mat-option",40),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t._id),e.R7$(1),e.JRh(t.name)}}function Y(n,i){1&n&&(e.j41(0,"mat-error"),e.EFF(1," this field is "),e.j41(2,"strong"),e.EFF(3,"required"),e.k0s()())}function V(n,i){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Description must be at least "),e.j41(2,"strong"),e.EFF(3,"20 characters"),e.k0s()())}function z(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"Submit"),e.k0s())}function X(n,i){1&n&&e.nrm(0,"i",43)}function B(n,i){if(1&n&&(e.j41(0,"button",41),e.DNE(1,z,2,0,"span",9),e.DNE(2,X,1,0,"i",42),e.k0s()),2&n){const t=e.XpG();e.Y8G("disabled",t.projectForm.invalid),e.R7$(1),e.Y8G("ngIf",!t.isLoading),e.R7$(1),e.Y8G("ngIf",t.isLoading)}}function L(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"Update"),e.k0s())}function U(n,i){1&n&&e.nrm(0,"i",43)}function J(n,i){if(1&n){const t=e.RV6();e.j41(0,"button",44),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.updateProject())}),e.DNE(1,L,2,0,"span",9),e.DNE(2,U,1,0,"i",42),e.k0s()}if(2&n){const t=e.XpG();let r;e.Y8G("disabled",(null==(r=t.projectForm.get("name"))||null==r.errors?null:r.errors.required)||(null==(r=t.projectForm.get("description"))||null==r.errors?null:r.errors.required)||(null==(r=t.projectForm.get("location"))||null==r.errors?null:r.errors.required)||(null==(r=t.projectForm.get("startDate"))||null==r.errors?null:r.errors.required)||(null==(r=t.projectForm.get("endDate"))||null==r.errors?null:r.errors.required)||(null==(r=t.projectForm.get("status"))||null==r.errors?null:r.errors.required)||(null==(r=t.projectForm.get("category"))||null==r.errors?null:r.errors.required)),e.R7$(1),e.Y8G("ngIf",!t.isLoading),e.R7$(1),e.Y8G("ngIf",t.isLoading)}}let A=(()=>{class n{constructor(t,r,o,s){this._DataService=t,this._ToastrService=r,this._MatDialogRef=o,this.data=s,this.isCoverSelected=!1,this.msgErr=!1,this.images=[],this.coverPreview=[],this.previews=[],this.projectCover=[],this.categories=[],this.isLoading=!1,this.updateState=!1,this.updatedImages=[],this.projectForm=new a.gE({name:new a.MJ(this.data?.name||null,[a.k0.required,a.k0.minLength(6)]),description:new a.MJ(this.data?.description||null,[a.k0.required,a.k0.minLength(20)]),location:new a.MJ(this.data?.location||null,[a.k0.required]),startDate:new a.MJ(this.data?.startDate||null,[a.k0.required]),endDate:new a.MJ(this.data?.endDate||null,[a.k0.required]),status:new a.MJ(this.data?.status||null,[a.k0.required]),visible:new a.MJ(JSON.stringify(this.data?.visible)||null,[a.k0.required]),category:new a.MJ(this.data?.category?._id||null,[a.k0.required]),projectCover:new a.MJ(this.data?.projectCover||null,[a.k0.required]),images:new a.MJ(this.data?.images||[],[a.k0.required])})}ngOnInit(){this.getAllCategories(),this.assignUpdatestate(),this.assignUpdateImages()}toggleLoader(){this.isLoading=!this.isLoading}assignUpdateImages(){this.data&&(this.data.projectCover&&(this.coverPreview=[this.data.projectCover],this.isCoverSelected=!0),this.data.images&&(this.previews=this.data.images))}assignUpdatestate(){this._DataService.updateState.subscribe({next:t=>{this.updateState=t},error:t=>{}})}getAllCategories(){this._DataService.getAllCategories().subscribe({next:t=>{this.categories=t},error:t=>{}})}onSelect(t){1==t.addedFiles.length&&0==this.isCoverSelected?(this.projectCover.push(t.addedFiles[0]),this.coverPreview=this.projectCover.map(r=>URL.createObjectURL(r)),this.projectForm.get("projectCover")?.setValue(this.projectCover[0]),this.isCoverSelected=!0,this.msgErr=!1):this.msgErr=!0}onRemove(t){this.projectCover.splice(this.projectCover.indexOf(t),1),this.coverPreview=this.projectCover.map(r=>URL.createObjectURL(r)),this.projectForm.get("projectCover")?.setValue(this.projectCover),this.isCoverSelected=!1,this.msgErr=!1}onSelectMultiImages(t){const r=t.addedFiles.filter(o=>!this.images.includes(o));this.images.push(...r),this.previews=this.images.map(o=>URL.createObjectURL(o)),this.projectForm.get("images")?.setValue(this.images)}onRemoveMultiImages(t,r){t instanceof File?(this.images.splice(this.images.indexOf(t),1),this.previews.splice(this.images.indexOf(t),1),this.previews=this.images.map(o=>URL.createObjectURL(o)),this.projectForm.get("images")?.setValue(this.images)):this.previews.splice(r,1)}prepareFromData(){let t=new FormData;return Object.entries(this.projectForm.value).forEach(([r,o])=>{"images"===r&&Array.isArray(o)?o.filter(c=>c instanceof File).forEach(c=>{t.append("images",c)}):"visible"==r&&o?t.append(r,JSON.parse(o)):"projectCover"===r&&o?o instanceof File&&t.append(r,o):null!=o&&t.append(r,o)}),t}addProject(){let t=this.prepareFromData();this.projectForm.get("projectCover")?.valid&&this.projectForm.get("images")?.valid&&!this.isLoading?(this.toggleLoader(),this._DataService.addProject(t).subscribe({next:r=>{this.toggleLoader(),this.cancel(!0),this._ToastrService.success("project Added Successfully","ADDING")},error:r=>{this.toggleLoader(),this.cancel(!1)}})):alert("invalid")}updateProject(){this.toggleLoader();let t=this.prepareFromData();this._DataService.updateProject(this.data._id,t).subscribe({next:r=>{this.toggleLoader(),this._ToastrService.success("project Updated Successfully","UPDATING"),this.cancel(!0)},error:r=>{this.toggleLoader(),this.cancel(!1)}})}cancel(t){this._MatDialogRef.close(t)}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(x.u),e.rXU(k.tw),e.rXU(m.CP),e.rXU(m.Vh))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-new-project"]],standalone:!0,features:[e.aNF],decls:111,vars:19,consts:[[1,"container-fluid","new-project","p-4","bg-white"],["action","",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6"],[1,"mb-4","project-cover"],["accept","image/*",3,"multiple","change"],["src","./assets/images/upload.png","alt","",1,"upload-icon"],[3,"removable","removed",4,"ngFor","ngForOf"],["class","text-capitalize",4,"ngIf"],[4,"ngIf"],[1,"mb-4","project-images"],[1,"mb-4"],["appearance","outline",1,"w-100"],["formControlName","name","type","text","placeholder","enter name","matInput",""],["formControlName","location","type","text","placeholder","enter Location","matInput",""],["formControlName","startDate","placeholder","Start Date","matInput","",3,"matDatepicker"],["matIconSuffix","",3,"for"],["picker",""],["formControlName","endDate","placeholder","End Date","matInput","",3,"matDatepicker"],["picker1",""],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","status","type","text","placeholder","enter status","matInput",""],[1,"col-md-12"],["formControlName","description","matInput","","placeholder","Description","rows","6"],["formControlName","visible"],["value","true"],["value","false"],[1,"d-flex","justify-content-center","align-items-center","gap-3"],["type","submit","class","create-btn",3,"disabled",4,"ngIf"],["type","button","class","update-btn",3,"disabled","click",4,"ngIf"],["type","button",1,"cancel-btn",3,"click"],[3,"removable","removed"],[1,"image-preview"],["alt","Image Preview",3,"src"],[1,"text-capitalize"],[1,"fa-solid","fa-circle-exclamation"],[1,"text-muted"],["class","text-danger m-0 mt-1",4,"ngIf"],[1,"text-danger","m-0","mt-1"],[3,"value"],["type","submit",1,"create-btn",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"fa","fa-spinner","fa-spin"],["type","button",1,"update-btn",3,"disabled","click"]],template:function(r,o){if(1&r&&(e.j41(0,"div",0)(1,"form",1),e.bIt("ngSubmit",function(){return o.addProject()}),e.j41(2,"div",2)(3,"div",3)(4,"div",4)(5,"ngx-dropzone",5),e.bIt("change",function(c){return o.onSelect(c)}),e.j41(6,"ngx-dropzone-label"),e.nrm(7,"img",6),e.j41(8,"span"),e.EFF(9,"Upload Project Cover"),e.k0s()(),e.DNE(10,E,4,2,"ngx-dropzone-preview",7),e.k0s(),e.DNE(11,I,5,0,"mat-error",8),e.DNE(12,N,2,1,"div",9),e.k0s()(),e.j41(13,"div",3)(14,"div",10)(15,"ngx-dropzone",5),e.bIt("change",function(c){return o.onSelectMultiImages(c)}),e.j41(16,"ngx-dropzone-label"),e.nrm(17,"img",6),e.j41(18,"span"),e.EFF(19,"Upload Project Images"),e.k0s()(),e.DNE(20,R,4,2,"ngx-dropzone-preview",7),e.k0s(),e.DNE(21,T,2,1,"div",9),e.k0s()(),e.j41(22,"div",3)(23,"div",11)(24,"mat-form-field",12)(25,"mat-label"),e.EFF(26,"Project name"),e.k0s(),e.nrm(27,"input",13),e.DNE(28,y,4,0,"mat-error",9),e.DNE(29,S,4,0,"mat-error",9),e.k0s()()(),e.j41(30,"div",3)(31,"div",11)(32,"mat-form-field",12)(33,"mat-label"),e.EFF(34,"Project Location"),e.k0s(),e.nrm(35,"input",14),e.j41(36,"mat-error"),e.EFF(37," this field is "),e.j41(38,"strong"),e.EFF(39,"required"),e.k0s()()()()(),e.j41(40,"div",3)(41,"div",11)(42,"mat-form-field",12)(43,"mat-label"),e.EFF(44,"Start Date"),e.k0s(),e.nrm(45,"input",15),e.j41(46,"mat-hint"),e.EFF(47,"MM/DD/YYYY"),e.k0s(),e.nrm(48,"mat-datepicker-toggle",16)(49,"mat-datepicker",null,17),e.j41(51,"mat-error"),e.EFF(52," this field is "),e.j41(53,"strong"),e.EFF(54,"required"),e.k0s()()()()(),e.j41(55,"div",3)(56,"div",11)(57,"mat-form-field",12)(58,"mat-label"),e.EFF(59,"End Date"),e.k0s(),e.nrm(60,"input",18),e.j41(61,"mat-hint"),e.EFF(62,"MM/DD/YYYY"),e.k0s(),e.nrm(63,"mat-datepicker-toggle",16)(64,"mat-datepicker",null,19),e.j41(66,"mat-error"),e.EFF(67," this field is "),e.j41(68,"strong"),e.EFF(69,"required"),e.k0s()()()()(),e.j41(70,"div",3)(71,"div",11)(72,"mat-form-field",12)(73,"mat-label"),e.EFF(74,"Project category"),e.k0s(),e.j41(75,"mat-select",20),e.DNE(76,$,2,2,"mat-option",21),e.k0s(),e.j41(77,"mat-error"),e.EFF(78," this field is "),e.j41(79,"strong"),e.EFF(80,"required"),e.k0s()()()()(),e.j41(81,"div",3)(82,"div",11)(83,"mat-form-field",12)(84,"mat-label"),e.EFF(85,"Project status"),e.k0s(),e.nrm(86,"input",22),e.j41(87,"mat-error"),e.EFF(88," this field is "),e.j41(89,"strong"),e.EFF(90,"required"),e.k0s()()()()(),e.j41(91,"div",23)(92,"div",11)(93,"mat-form-field",12)(94,"mat-label"),e.EFF(95,"Project Description"),e.k0s(),e.nrm(96,"textarea",24),e.DNE(97,Y,4,0,"mat-error",9),e.DNE(98,V,4,0,"mat-error",9),e.k0s()()(),e.j41(99,"div",23)(100,"div",11)(101,"mat-radio-group",25)(102,"mat-radio-button",26),e.EFF(103,"Visible"),e.k0s(),e.j41(104,"mat-radio-button",27),e.EFF(105,"Hidden"),e.k0s()()()(),e.j41(106,"div",28),e.DNE(107,B,3,3,"button",29),e.DNE(108,J,3,3,"button",30),e.j41(109,"button",31),e.bIt("click",function(){return o.cancel(!0)}),e.EFF(110,"Cancel"),e.k0s()()()()()),2&r){const s=e.sdS(50),c=e.sdS(65);let d,_,j,h,C,F;e.R7$(1),e.Y8G("formGroup",o.projectForm),e.R7$(4),e.Y8G("multiple",!1),e.R7$(5),e.Y8G("ngForOf",o.coverPreview),e.R7$(1),e.Y8G("ngIf",o.msgErr),e.R7$(1),e.Y8G("ngIf",(null==(d=o.projectForm.get("projectCover"))?null:d.touched)||(null==(d=o.projectForm.get("projectCover"))?null:d.errors)),e.R7$(3),e.Y8G("multiple",!0),e.R7$(5),e.Y8G("ngForOf",o.previews),e.R7$(1),e.Y8G("ngIf",(null==(_=o.projectForm.get("images"))?null:_.touched)||(null==(_=o.projectForm.get("images"))?null:_.errors)),e.R7$(7),e.Y8G("ngIf",null==(j=o.projectForm.get("name"))||null==j.errors?null:j.errors.required),e.R7$(1),e.Y8G("ngIf",null==(h=o.projectForm.get("name"))||null==h.errors?null:h.errors.minlength),e.R7$(16),e.Y8G("matDatepicker",s),e.R7$(3),e.Y8G("for",s),e.R7$(12),e.Y8G("matDatepicker",c),e.R7$(3),e.Y8G("for",c),e.R7$(13),e.Y8G("ngForOf",o.categories),e.R7$(21),e.Y8G("ngIf",null==(C=o.projectForm.get("description"))||null==C.errors?null:C.errors.required),e.R7$(1),e.Y8G("ngIf",null==(F=o.projectForm.get("description"))||null==F.errors?null:F.errors.minlength),e.R7$(9),e.Y8G("ngIf",!o.updateState),e.R7$(1),e.Y8G("ngIf",o.updateState)}},dependencies:[p.MD,p.Sq,p.bT,P.G,a.qT,a.me,a.BC,a.cb,a.j4,a.JD,g.rl,g.nJ,g.MV,g.TL,g.yw,u.s3,u.Gt,u.YS,w.fg,M.VO,D.wT,b.VT,b._g,f.Vh,f.bZ,f.bU],styles:[".new-project[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{text-transform:capitalize}.new-project[_ngcontent-%COMP%]   .project-cover[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]{height:200px;padding:0}.new-project[_ngcontent-%COMP%]   .project-cover[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px}.new-project[_ngcontent-%COMP%]   .project-cover[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]:hover   .upload-icon[_ngcontent-%COMP%]{transform:scale(1.2)}.new-project[_ngcontent-%COMP%]   .project-cover[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;transition:all .2s ease-in-out}.new-project[_ngcontent-%COMP%]   .project-cover[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-preview[_ngcontent-%COMP%]{min-width:100%!important;min-height:200px!important;padding:0!important;margin:0!important}.new-project[_ngcontent-%COMP%]   .project-cover[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-preview[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]{width:90%;height:100%}.new-project[_ngcontent-%COMP%]   .project-cover[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-preview[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{width:100%;height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center}.new-project[_ngcontent-%COMP%]   .project-cover[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-preview[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.new-project[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]{height:200px;padding:0}.new-project[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px}.new-project[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]:hover   .upload-icon[_ngcontent-%COMP%]{transform:scale(1.2)}.new-project[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;transition:all .2s ease-in-out}.new-project[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-preview[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.new-project[_ngcontent-%COMP%]   ngx-dropzone[_ngcontent-%COMP%]   ngx-dropzone-preview[_ngcontent-%COMP%]   ngx-dropzone-label[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:130px;height:140px;object-fit:cover}"]})}}return n})(),q=(()=>{class n{transform(t,r){return t.filter(o=>o.name.toLowerCase().includes(r.toLowerCase()))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=e.EJ8({name:"namesearch",type:n,pure:!0})}}return n})(),H=(()=>{class n{transform(t,r){return t.filter(o=>o?.category?.name.toLowerCase().includes(r.toLowerCase()))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=e.EJ8({name:"categorysearch",type:n,pure:!0})}}return n})(),Z=(()=>{class n{transform(t,r){return t.filter(o=>o.status.toLowerCase().includes(r.toLowerCase()))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=e.EJ8({name:"statussearch",type:n,pure:!0})}}return n})(),W=(()=>{class n{transform(t,r){if(!r)return t;const o=new Date(r);return o.setHours(0,0,0,0),t.filter(s=>{const c=new Date(s.startDate);return c.setHours(0,0,0,0),c.getTime()===o.getTime()})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=e.EJ8({name:"startdatesearch",type:n,pure:!0})}}return n})(),K=(()=>{class n{transform(t,r){if(!r)return t;const o=new Date(r);return o.setHours(0,0,0,0),t.filter(s=>{const c=new Date(s.endDate);return c.setHours(0,0,0),c.getTime()==o.getTime()})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=e.EJ8({name:"enddatesearch",type:n,pure:!0})}}return n})();function Q(n,i){1&n&&e.nrm(0,"i",25)}function ee(n,i){1&n&&e.nrm(0,"i",26)}function te(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"Filter By"),e.k0s())}function ne(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"Reset Filter"),e.k0s())}function oe(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"Name"),e.k0s())}function re(n,i){if(1&n){const t=e.RV6();e.j41(0,"input",27),e.bIt("ngModelChange",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.nameSearch=o)}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("ngModel",t.nameSearch)}}function ie(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"Category"),e.k0s())}function se(n,i){if(1&n&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t.name),e.R7$(1),e.JRh(t.name)}}function ae(n,i){if(1&n){const t=e.RV6();e.j41(0,"select",28),e.bIt("ngModelChange",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.categorySearch=o)}),e.j41(1,"option",29),e.EFF(2,"Select"),e.k0s(),e.DNE(3,se,2,2,"option",30),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("ngModel",t.categorySearch),e.R7$(3),e.Y8G("ngForOf",t.categories)}}function ce(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"Status"),e.k0s())}function le(n,i){if(1&n&&(e.j41(0,"option",31),e.EFF(1),e.k0s()),2&n){const t=i.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}function pe(n,i){if(1&n){const t=e.RV6();e.j41(0,"select",28),e.bIt("ngModelChange",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.statusSearch=o)}),e.j41(1,"option",29),e.EFF(2,"Select"),e.k0s(),e.DNE(3,le,2,2,"option",30),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("ngModel",t.statusSearch),e.R7$(3),e.Y8G("ngForOf",t.projectStatus)}}function ge(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"start date"),e.k0s())}function me(n,i){if(1&n){const t=e.RV6();e.j41(0,"input",32),e.bIt("ngModelChange",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.startDateSearch=o)}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("ngModel",t.startDateSearch)}}function de(n,i){1&n&&(e.j41(0,"span"),e.EFF(1,"end date"),e.k0s())}function _e(n,i){if(1&n){const t=e.RV6();e.j41(0,"input",32),e.bIt("ngModelChange",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.endDateSearch=o)}),e.k0s()}if(2&n){const t=e.XpG(2);e.Y8G("ngModel",t.endDateSearch)}}function ue(n,i){if(1&n){const t=e.RV6();e.j41(0,"tr")(1,"td",9),e.bIt("click",function(){const s=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.displayProjectImages(s))}),e.nrm(2,"img",33),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.nI1(11,"date"),e.k0s(),e.j41(12,"td"),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td")(18,"span"),e.EFF(19),e.k0s()(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td",9),e.bIt("click",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.stop(o))}),e.j41(23,"i",34),e.bIt("click",function(){const s=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.updateProject(s))}),e.k0s()(),e.j41(24,"td",9),e.bIt("click",function(o){e.eBV(t);const s=e.XpG(2);return e.Njj(s.stop(o))}),e.j41(25,"i",35),e.bIt("click",function(){const s=e.eBV(t).$implicit,c=e.XpG(2);return e.Njj(c.openDeleteProject(s._id))}),e.k0s()()()}if(2&n){const t=i.$implicit,r=i.index,o=i.even;e.R7$(1),e.AVh("bg-row",o),e.R7$(1),e.Y8G("src",t.projectCover,e.B4B)("alt",t.name),e.R7$(1),e.AVh("bg-row",o),e.R7$(1),e.JRh(r+1),e.R7$(1),e.AVh("bg-row",o),e.R7$(1),e.JRh(t.name),e.R7$(1),e.AVh("bg-row",o),e.R7$(1),e.JRh(t.location),e.R7$(1),e.AVh("bg-row",o),e.R7$(1),e.JRh(e.i5U(11,34,t.startDate,"longDate")),e.R7$(2),e.AVh("bg-row",o),e.R7$(1),e.JRh(e.i5U(14,37,t.endDate,"longDate")),e.R7$(2),e.AVh("bg-row",o),e.R7$(1),e.JRh(t.category.name),e.R7$(1),e.AVh("bg-row",o),e.R7$(1),e.HbH(t.visible?"visible-state":"hidden-state"),e.R7$(1),e.JRh(t.visible?"Visible":"Hidden"),e.R7$(1),e.AVh("bg-row",o),e.R7$(1),e.JRh(t.status),e.R7$(1),e.AVh("bg-row",o),e.R7$(2),e.AVh("bg-row",o)}}function fe(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"ul",8)(5,"li",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.clearSearch())}),e.DNE(6,Q,1,0,"i",10),e.DNE(7,ee,1,0,"i",11),e.DNE(8,te,2,0,"span",12),e.DNE(9,ne,2,0,"span",12),e.k0s(),e.j41(10,"li",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleFilter("nameFlag"))}),e.DNE(11,oe,2,0,"span",12),e.DNE(12,re,1,1,"input",13),e.k0s(),e.j41(13,"li",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleFilter("categoryFlag"))}),e.DNE(14,ie,2,0,"span",12),e.DNE(15,ae,4,2,"select",14),e.k0s(),e.j41(16,"li",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleFilter("statusFlag"))}),e.DNE(17,ce,2,0,"span",12),e.DNE(18,pe,4,2,"select",14),e.k0s(),e.j41(19,"li",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleFilter("startDateFlag"))}),e.DNE(20,ge,2,0,"span",12),e.DNE(21,me,1,1,"input",15),e.k0s(),e.j41(22,"li",9),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.toggleFilter("endDateFlag"))}),e.DNE(23,de,2,0,"span",12),e.DNE(24,_e,1,1,"input",15),e.k0s()()()(),e.j41(25,"div",16)(26,"div",17)(27,"button",18),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.addProject())}),e.EFF(28,"New Project"),e.k0s()()()(),e.j41(29,"div",19)(30,"div")(31,"span",20),e.nrm(32,"i",21),e.EFF(33," Click on the cover to see project images"),e.k0s()(),e.j41(34,"table",22)(35,"thead")(36,"tr")(37,"th"),e.EFF(38,"Cover"),e.k0s(),e.j41(39,"th"),e.EFF(40,"Num"),e.k0s(),e.j41(41,"th"),e.EFF(42,"name"),e.k0s(),e.j41(43,"th"),e.EFF(44,"location"),e.k0s(),e.j41(45,"th"),e.EFF(46,"start Date"),e.k0s(),e.j41(47,"th"),e.EFF(48,"end Date"),e.k0s(),e.j41(49,"th"),e.EFF(50,"category"),e.k0s(),e.j41(51,"th"),e.EFF(52,"Visibilty"),e.k0s(),e.j41(53,"th",23),e.EFF(54,"status"),e.k0s()()(),e.j41(55,"tbody"),e.DNE(56,ue,26,40,"tr",24),e.nI1(57,"enddatesearch"),e.nI1(58,"startdatesearch"),e.nI1(59,"categorysearch"),e.nI1(60,"statussearch"),e.nI1(61,"namesearch"),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(6),e.Y8G("ngIf",!(t.nameFlag||t.startDateFlag||t.endDateFlag||t.statusFlag||t.categoryFlag)),e.R7$(1),e.Y8G("ngIf",t.nameFlag||t.startDateFlag||t.endDateFlag||t.statusFlag||t.categoryFlag),e.R7$(1),e.Y8G("ngIf",!(t.nameFlag||t.startDateFlag||t.endDateFlag||t.statusFlag||t.categoryFlag)),e.R7$(1),e.Y8G("ngIf",t.nameFlag||t.startDateFlag||t.endDateFlag||t.statusFlag||t.categoryFlag),e.R7$(2),e.Y8G("ngIf",!t.nameFlag),e.R7$(1),e.Y8G("ngIf",t.nameFlag),e.R7$(2),e.Y8G("ngIf",!t.categoryFlag),e.R7$(1),e.Y8G("ngIf",t.categoryFlag),e.R7$(2),e.Y8G("ngIf",!t.statusFlag),e.R7$(1),e.Y8G("ngIf",t.statusFlag),e.R7$(2),e.Y8G("ngIf",!t.startDateFlag),e.R7$(1),e.Y8G("ngIf",t.startDateFlag),e.R7$(2),e.Y8G("ngIf",!t.endDateFlag),e.R7$(1),e.Y8G("ngIf",t.endDateFlag),e.R7$(32),e.Y8G("ngForOf",e.i5U(57,15,e.i5U(58,18,e.i5U(59,21,e.i5U(60,24,e.i5U(61,27,t.Projects,t.nameSearch),t.statusSearch),t.categorySearch),t.startDateSearch),t.endDateSearch))}}function je(n,i){1&n&&(e.j41(0,"div",36)(1,"h1",37),e.EFF(2,"Empty"),e.k0s(),e.j41(3,"p",20),e.EFF(4,"There is no Project yet, please Add some"),e.k0s()())}function he(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",38),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.isDelClicked=!o.isDelClicked)}),e.j41(1,"div",39),e.bIt("click",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.stop(o))}),e.j41(2,"h2"),e.EFF(3,"Are you sure you want to delete this Project?"),e.k0s(),e.j41(4,"p",40)(5,"strong"),e.EFF(6,"Note : "),e.k0s(),e.EFF(7,"This action cannot be undone."),e.k0s(),e.j41(8,"div",41)(9,"button",42),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.isDelClicked=!o.isDelClicked)}),e.EFF(10,"Discard"),e.k0s(),e.j41(11,"button",43),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.ConfirmDeleteProject())}),e.EFF(12,"Delete"),e.k0s()()()()}}function Ce(n,i){if(1&n){const t=e.RV6();e.j41(0,"div",44),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.isImagesClicked=!1)}),e.j41(1,"div",45),e.bIt("click",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.stop(o))}),e.nrm(2,"img",46),e.j41(3,"i",47),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.isImagesClicked=!1)}),e.k0s(),e.j41(4,"div",48)(5,"i",49),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.move("left"))}),e.k0s(),e.j41(6,"i",50),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.move("right"))}),e.k0s()(),e.j41(7,"div",51)(8,"span",52)(9,"span",53),e.EFF(10),e.k0s(),e.EFF(11),e.k0s()()()()}if(2&n){const t=e.XpG();e.R7$(2),e.Y8G("src",t.projectImages[t.imageIndex],e.B4B),e.R7$(8),e.JRh(t.imageIndex+1),e.R7$(1),e.SpI(" / ",t.projectImages.length,"")}}let Fe=(()=>{class n{constructor(t,r,o){this._MatDialog=t,this._DataService=r,this._ToastrService=o,this.Projects=[],this.isDelClicked=!1,this.isImagesClicked=!1,this.categories=[],this.projectId="",this.imageIndex=0,this.projectStatus=[],this.projectImages=[],this.nameSearch="",this.categorySearch="",this.statusSearch="",this.startDateSearch="",this.endDateSearch="",this.nameFlag=!1,this.categoryFlag=!1,this.statusFlag=!1,this.startDateFlag=!1,this.endDateFlag=!1}ngOnInit(){this.getAllProjects(),this.getAllCategories()}getAllProjects(){this._DataService.getAllProjects().subscribe({next:t=>{this.Projects=t,this.projectStatus=t.map(r=>r.status)},error:t=>{console.log(t)}})}getAllCategories(){this._DataService.getAllCategories().subscribe({next:t=>{this.categories=t},error:t=>{console.log(t)}})}addProject(t,r=!1){this._DataService.updateState.next(r),this._MatDialog.open(A,{maxWidth:"90vw",maxHeight:"90vh",hasBackdrop:!0,disableClose:!1,data:t,backdropClass:"custom-backdrop-class",panelClass:"custom-dialog-class",autoFocus:!0,restoreFocus:!0,closeOnNavigation:!0}).afterClosed().subscribe(s=>{1==s&&this.getAllProjects(),console.log("The dialog was closed")})}updateProject(t){this.addProject(t,!0)}toggleDelClicked(){this.isDelClicked=!this.isDelClicked}ConfirmDeleteProject(){""!=this.projectId?this._DataService.deleteProject(this.projectId).subscribe({next:t=>{this._ToastrService.success(t.message),this.getAllProjects(),this.toggleDelClicked()},error:t=>{console.log(t),this.toggleDelClicked()}}):console.log("Error Deleting")}openDeleteProject(t){this.toggleDelClicked(),this.projectId=t}displayProjectImages(t){this.imageIndex=0,this.isImagesClicked=!this.isImagesClicked,this.projectImages=t.images}move(t){"right"==t?this.imageIndex>=this.projectImages.length-1?this.imageIndex=0:this.imageIndex++:"left"==t&&(this.imageIndex<=0?this.imageIndex=this.projectImages.length-1:this.imageIndex--)}resetFilter(){this.nameFlag=!1,this.statusFlag=!1,this.categoryFlag=!1,this.startDateFlag=!1,this.endDateFlag=!1}clearSearch(){this.nameSearch="",this.statusSearch="",this.categorySearch="",this.startDateSearch="",this.endDateSearch="",this.resetFilter()}toggleFilter(t){this.resetFilter(),this[t]=!this[t]}stop(t){t.stopPropagation()}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(m.bZ),e.rXU(x.u),e.rXU(k.tw))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-projects"]],standalone:!0,features:[e.Jv_([]),e.aNF],decls:5,vars:4,consts:[["class","main container-fluid mt-4",4,"ngIf","ngIfElse"],["msg",""],["class","position-fixed top-0 bottom-0 end-0 start-0 d-flex flex-column  justify-content-center align-items-center confirm",3,"click",4,"ngIf"],["class"," d-flex justify-content-center align-items-center project-image-preview",3,"click",4,"ngIf"],[1,"main","container-fluid","mt-4"],[1,"row","g-4","justify-content-between","align-items-center","logic-buttons"],[1,"col-md-10"],[1,"filter"],[1,"list-unstyled","flex-lg-nowrap","flex-wrap"],[3,"click"],["class","fa-solid fa-filter",4,"ngIf"],["class","fa-solid fa-filter-circle-xmark",4,"ngIf"],[4,"ngIf"],["type","text","placeholder","Enter Name","title","name",3,"ngModel","ngModelChange",4,"ngIf"],["title","categories",3,"ngModel","ngModelChange",4,"ngIf"],["type","date","title","date","name","","id","",3,"ngModel","ngModelChange",4,"ngIf"],[1,"col-md-2"],[1,"text-end"],["type","button",3,"click"],[1,"mt-4","overflow-auto"],[1,"text-white-50"],[1,"fa-regular","fa-circle-question"],[1,"my-table"],["colspan","3",1,"text-start","ps-4"],[4,"ngFor","ngForOf"],[1,"fa-solid","fa-filter"],[1,"fa-solid","fa-filter-circle-xmark"],["type","text","placeholder","Enter Name","title","name",3,"ngModel","ngModelChange"],["title","categories",3,"ngModel","ngModelChange"],["value","","selected","","disabled",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["type","date","title","date","name","","id","",3,"ngModel","ngModelChange"],["title","image",3,"src","alt"],[1,"fa","fa-edit","fa-xl","me-3",3,"click"],[1,"fa","fa-trash-can","fa-xl","me-3",3,"click"],[1,"msg","flex-column"],[1,"text-white"],[1,"position-fixed","top-0","bottom-0","end-0","start-0","d-flex","flex-column","justify-content-center","align-items-center","confirm",3,"click"],[1,"confirm-form","gap-3","w-50","text-center","p-4","d-flex","flex-column",3,"click"],[1,"text-muted"],[1,"d-flex","justify-content-center","align-items-center","gap-4","flex-wrap"],["type","button",1,"discard",3,"click"],["type","button",1,"delete",3,"click"],[1,"d-flex","justify-content-center","align-items-center","project-image-preview",3,"click"],[1,"main-image","position-relative",3,"click"],["alt","",1,"d-block","m-auto",3,"src"],[1,"fa","fa-xmark","fa-2x","position-absolute",3,"click"],[1,"position-absolute","slider-arrow","d-flex","justify-content-between"],[1,"fa-solid","fa-circle-left",3,"click"],[1,"fa-solid","fa-circle-right",3,"click"],[1,"text-center","mt-3"],[1,"text-white","bg-black","p-2","rounded-3"],[1,"text-info"]],template:function(r,o){if(1&r&&(e.DNE(0,fe,62,30,"div",0),e.DNE(1,je,5,0,"ng-template",null,1,e.C5r),e.DNE(3,he,13,0,"div",2),e.DNE(4,Ce,12,3,"div",3)),2&r){const s=e.sdS(2);e.Y8G("ngIf",o.Projects[0])("ngIfElse",s),e.R7$(3),e.Y8G("ngIf",o.isDelClicked),e.R7$(1),e.Y8G("ngIf",o.isImagesClicked)}},dependencies:[p.MD,p.Sq,p.bT,p.vh,m.hM,P.G,a.xH,a.y7,a.me,a.wz,a.BC,a.vS,q,H,Z,W,K],styles:[".main[_ngcontent-%COMP%]{min-height:calc(100vh - 80px)}.main[_ngcontent-%COMP%]   .my-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100px;height:100px;object-fit:cover;border-radius:50%}.project-image-preview[_ngcontent-%COMP%]{background-color:#00000080;position:fixed;inset:0;overflow:auto}.project-image-preview[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]{overflow-y:auto;padding:50px 0;width:50%}.project-image-preview[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%;min-height:400px;object-fit:cover}.project-image-preview[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   .fa-xmark[_ngcontent-%COMP%]{color:#fff;right:6%;top:12%;transition:all .3s ease;cursor:pointer}.project-image-preview[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   .fa-xmark[_ngcontent-%COMP%]:hover{color:#fff9}.project-image-preview[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   .slider-arrow[_ngcontent-%COMP%]{top:50%;left:5%;right:5%;transform:translateY(-50%)}.project-image-preview[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   .slider-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:35px;color:#fff;cursor:pointer;transition:all .3s ease}.project-image-preview[_ngcontent-%COMP%]   .main-image[_ngcontent-%COMP%]   .slider-arrow[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{color:#fff9}.custom-backdrop-class[_ngcontent-%COMP%]{background-color:#000c}.custom-dialog-class[_ngcontent-%COMP%]{border-radius:10px;box-shadow:0 4px 10px #0003}@media screen and (max-width: 768px){.main-image[_ngcontent-%COMP%]{width:100%!important}.main-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%!important}.main-image[_ngcontent-%COMP%]   .slider-arrow[_ngcontent-%COMP%]{top:90%!important}}"]})}}return n})()}}]);